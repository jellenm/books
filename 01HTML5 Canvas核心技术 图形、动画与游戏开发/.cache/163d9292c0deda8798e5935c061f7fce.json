{"dependencies":[{"name":"./worker.js","dynamic":true}],"generated":{"js":"\"use strict\";\n\nvar WIDTH = 800,\n    HEIGHT = 300;\nvar canvas = document.getElementById('canvas'),\n    context = canvas.getContext('2d'),\n    fadeInBtn = document.getElementById('fadeIn'),\n    fadeOutBtn = document.getElementById('fadeOut'),\n    fadeEle = document.getElementsByName('fade'),\n    imageData = void 0,\n    opacity = 1,\n    step = 100,\n    timg = void 0,\n    worker = new Worker(\"/dist/bba1d547690bd242fc2128020e90c468.js\");\ncanvas.width = WIDTH;\ncanvas.height = HEIGHT;\nvar image = new Image();\nimage.onload = function () {\n  context.drawImage(image, 0, 0, WIDTH, HEIGHT);\n  imageData = context.getImageData(0, 0, WIDTH, HEIGHT);\n};\nimage.src = './detail.jpg';\n\nfunction fade(out) {\n  var nowStep = 0;\n  if (timg) {\n    clearInterval(timg);\n  }\n  timg = setInterval(function () {\n    nowStep++;\n    if (nowStep < step) {\n      if (out) {\n        var now = 1 - nowStep / step;\n      } else {\n        var now = nowStep / step;\n      }\n      worker.postMessage({ data: imageData, step: now });\n      worker.onmessage = function (e) {\n        var data = e.data;\n        context.putImageData(data, 0, 0, 0, 0, WIDTH, HEIGHT);\n      };\n    } else {\n      clearInterval(timg);\n      if (out) {\n        var now = 0;\n      } else {\n        var now = 1;\n      }\n      worker.postMessage({ data: imageData, step: now });\n      worker.onmessage = function (e) {\n        var data = e.data;\n        context.putImageData(data, 0, 0, 0, 0, WIDTH, HEIGHT);\n      };\n    }\n  }, 10);\n}\n\nfadeInBtn.onchange = function () {\n  fade();\n};\nfadeOutBtn.onchange = function () {\n  fade('out');\n};"},"hash":"8cefd7f9d0d7afff060016478cae5bbe"}